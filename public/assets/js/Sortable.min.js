/*! Sortable 1.11.0 - MIT | git://github.com/SortableJS/Sortable.git */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Sortable=e()}(this,function(){"use strict";function t(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}const e=t(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),o=t(/Edge/i),n=t(/firefox/i),i=t(/safari/i)&&!t(/chrome/i)&&!t(/android/i),l=t(/iP(ad|od|hone)/i),r=t(/chrome/i)&&t(/android/i),a={capture:!1,passive:!1};function s(t,o,n){t.addEventListener(o,n,!e&&a)}function c(t,o,n){t.removeEventListener(o,n,!e&&a)}function d(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function u(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function h(t,e,o,n){if(t){o=o||document;do{if(null!=e&&(">"===e[0]?t.parentNode===o&&d(t,e):d(t,e))||n&&t===o)return t;if(t===o)break}while(t=u(t))}return null}const p=/\s+/g;function f(t,e,o){if(t&&e)if(t.classList)t.classList[o?"add":"remove"](e);else{let n=(" "+t.className+" ").replace(p," ").replace(" "+e+" "," ");t.className=(n+(o?" "+e:"")).replace(p," ")}}function g(t,e,o){let n=t&&t.style;if(n){if(void 0===o)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(o=t.currentStyle),void 0===e?o:o[e];e in n||-1!==e.indexOf("webkit")||(e="-webkit-"+e),n[e]=o+("string"==typeof o?"":"px")}}function m(t,e){let o="";if("string"==typeof t)o=t;else do{let e=g(t,"transform");e&&"none"!==e&&(o=e+" "+o)}while(!e&&(t=t.parentNode));const n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(o)}function v(t,e,o){if(t){let n=t.getElementsByTagName(e),i=0,l=n.length;if(o)for(;i<l;i++)o(n[i],i);return n}return[]}function b(){let t=document.scrollingElement;return t||document.documentElement}function w(t,o,n,i,l){if(!t.getBoundingClientRect&&t!==window)return;let r,a,s,c,d,u,h;if(t!==window&&t!==b()?(a=(r=t.getBoundingClientRect()).top,s=r.left,c=r.bottom,d=r.right,u=r.height,h=r.width):(a=0,s=0,c=window.innerHeight,d=window.innerWidth,u=window.innerHeight,h=window.innerWidth),(o||n)&&t!==window&&(l=l||t.parentNode,!e))do{if(l&&l.getBoundingClientRect&&("none"!==g(l,"transform")||n&&"static"!==g(l,"position"))){let t=l.getBoundingClientRect();a-=t.top+parseInt(g(l,"border-top-width")),s-=t.left+parseInt(g(l,"border-left-width")),c=a+r.height,d=s+r.width;break}}while(l=l.parentNode);if(i&&t!==window){let e=m(l||t),o=e&&e.a,n=e&&e.d;e&&(c=(a/=n)+(u/=n),d=(s/=o)+(h/=o))}return{top:a,left:s,bottom:c,right:d,width:h,height:u}}function E(t,e,o){let n=C(t,!0),i=w(t)[e];for(;n;){let t,e=w(n)[o];if(!(t="top"===o||"left"===o?i>=e:i<=e))return n;if(n===b())break;n=C(n,!1)}return!1}function y(t,e,o){let n=0,i=0,l=t.children;for(;i<l.length;){if("none"!==l[i].style.display&&l[i]!==Ot.ghost&&l[i]!==Ot.dragged&&h(l[i],o.draggable,t,!1)){if(n===e)return l[i];n++}i++}return null}function D(t,e){let o=t.lastElementChild;for(;o&&(o===Ot.ghost||"none"===g(o,"display")||e&&!d(o,e));)o=o.previousElementSibling;return o||null}function _(t,e){let o=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===Ot.clone||e&&!d(t,e)||o++;return o}function S(t){let e=0,o=0,n=b();if(t)do{let n=m(t),i=n.a,l=n.d;e+=t.scrollLeft*i,o+=t.scrollTop*l}while(t!==n&&(t=t.parentNode));return[e,o]}function C(t,e){if(!t||!t.getBoundingClientRect)return b();let o=t,n=!1;do{if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){let t=g(o);if(o.clientWidth<o.scrollWidth&&("auto"==t.overflowX||"scroll"==t.overflowX)||o.clientHeight<o.scrollHeight&&("auto"==t.overflowY||"scroll"==t.overflowY)){if(!o.getBoundingClientRect||o===document.body)return b();if(n||e)return o;n=!0}}}while(o=o.parentNode);return b()}function T(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}let x;function M(t,e){return function(){if(!x){let o=arguments,n=this;1===o.length?t.call(n,o[0]):t.apply(n,o),x=setTimeout(function(){x=void 0},e)}}}function N(t,e,o){t.scrollLeft+=e,t.scrollTop+=o}function A(t){let e=window.Polymer,o=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):o?o(t).clone(!0)[0]:t.cloneNode(!0)}function O(t,e){g(t,"position","absolute"),g(t,"top",e.top),g(t,"left",e.left),g(t,"width",e.width),g(t,"height",e.height)}function I(t){g(t,"position",""),g(t,"top",""),g(t,"left",""),g(t,"width",""),g(t,"height","")}const P="Sortable"+(new Date).getTime();function k(){let t,e=[];return{captureAnimationState(){if(e=[],!this.options.animation)return;[].slice.call(this.el.children).forEach(t=>{if("none"===g(t,"display")||t===Ot.ghost)return;e.push({target:t,rect:w(t)});let o={...e[e.length-1].rect};if(t.thisAnimationDuration){let e=m(t,!0);e&&(o.top-=e.f,o.left-=e.e)}t.fromRect=o})},addAnimationState(t){e.push(t)},removeAnimationState(t){e.splice(function(t,e){for(let o in t)if(t.hasOwnProperty(o))for(let n in e)if(e.hasOwnProperty(n)&&e[n]===t[o][n])return Number(o);return-1}(e,{target:t}),1)},animateAll(o){if(!this.options.animation)return clearTimeout(t),void("function"==typeof o&&o());let n=!1,i=0;e.forEach(t=>{let e=0,o=t.target,l=o.fromRect,r=w(o),a=o.prevFromRect,s=o.prevToRect,c=t.rect,d=m(o,!0);d&&(r.top-=d.f,r.left-=d.e),o.toRect=r,o.thisAnimationDuration&&T(a,r)&&!T(l,r)&&(c.top-r.top)/(c.left-r.left)==(l.top-r.top)/(l.left-r.left)&&(e=function(t,e,o,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-o.top,2)+Math.pow(e.left-o.left,2))*n.animation}(c,a,s,this.options)),T(r,l)||(o.prevFromRect=l,o.prevToRect=r,e||(e=this.options.animation),this.animate(o,c,r,e)),e&&(n=!0,i=Math.max(i,e),clearTimeout(o.animationResetTimer),o.animationResetTimer=setTimeout(function(){o.animationTime=0,o.prevFromRect=null,o.fromRect=null,o.prevToRect=null,o.thisAnimationDuration=null},e),o.thisAnimationDuration=e)}),clearTimeout(t),n?t=setTimeout(function(){"function"==typeof o&&o()},i):"function"==typeof o&&o(),e=[]},animate(t,e,o,n){if(n){g(t,"transition",""),g(t,"transform","");let i=m(this.el),l=i&&i.a,r=i&&i.d,a=(e.left-o.left)/(l||1),s=(e.top-o.top)/(r||1);t.animatingX=!!a,t.animatingY=!!s,g(t,"transform","translate3d("+a+"px,"+s+"px,0)"),this.forRepaintDummy=function(t){return t.offsetWidth}(t),g(t,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),g(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout(function(){g(t,"transition",""),g(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},n)}}}}let R=[];const X={initializeByDefault:!0};var Y={mount(t){for(let e in X)!X.hasOwnProperty(e)||e in t||(t[e]=X[e]);R.push(t)},pluginEvent(t,e,o){this.eventCanceled=!1,o.cancel=(()=>{this.eventCanceled=!0});const n=t+"Global";R.forEach(i=>{e[i.pluginName]&&(e[i.pluginName][n]&&e[i.pluginName][n]({sortable:e,...o}),e.options[i.pluginName]&&e[i.pluginName][t]&&e[i.pluginName][t]({sortable:e,...o}))})},initializePlugins(t,e,o,n){R.forEach(n=>{const i=n.pluginName;if(!t.options[i]&&!n.initializeByDefault)return;let l=new n(t,e,t.options);l.sortable=t,l.options=t.options,t[i]=l,Object.assign(o,l.defaults)});for(let e in t.options){if(!t.options.hasOwnProperty(e))continue;let o=this.modifyOption(t,e,t.options[e]);void 0!==o&&(t.options[e]=o)}},getEventProperties(t,e){let o={};return R.forEach(n=>{"function"==typeof n.eventProperties&&Object.assign(o,n.eventProperties.call(e[n.pluginName],t))}),o},modifyOption(t,e,o){let n;return R.forEach(i=>{t[i.pluginName]&&i.optionListeners&&"function"==typeof i.optionListeners[e]&&(n=i.optionListeners[e].call(t[i.pluginName],o))}),n}};function B({sortable:t,rootEl:n,name:i,targetEl:l,cloneEl:r,toEl:a,fromEl:s,oldIndex:c,newIndex:d,oldDraggableIndex:u,newDraggableIndex:h,originalEvent:p,putSortable:f,extraEventProperties:g}){if(!(t=t||n&&n[P]))return;let m,v=t.options,b="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||e||o?(m=document.createEvent("Event")).initEvent(i,!0,!0):m=new CustomEvent(i,{bubbles:!0,cancelable:!0}),m.to=a||n,m.from=s||n,m.item=l||n,m.clone=r,m.oldIndex=c,m.newIndex=d,m.oldDraggableIndex=u,m.newDraggableIndex=h,m.originalEvent=p,m.pullMode=f?f.lastPutMode:void 0;let w={...g,...Y.getEventProperties(i,t)};for(let t in w)m[t]=w[t];n&&n.dispatchEvent(m),v[b]&&v[b].call(t,m)}let F=function(t,e,{evt:o,...n}={}){Y.pluginEvent.bind(Ot)(t,e,{dragEl:L,parentEl:K,ghostEl:W,rootEl:j,nextEl:z,lastDownEl:G,cloneEl:U,cloneHidden:$,dragStarted:at,putSortable:tt,activeSortable:Ot.active,originalEvent:o,oldIndex:q,oldDraggableIndex:Z,newIndex:V,newDraggableIndex:Q,hideGhostForTarget:xt,unhideGhostForTarget:Mt,cloneNowHidden(){$=!0},cloneNowShown(){$=!1},dispatchSortableEvent(t){H({sortable:e,name:t,originalEvent:o})},...n})};function H(t){B({putSortable:tt,cloneEl:U,targetEl:L,rootEl:j,oldIndex:q,oldDraggableIndex:Z,newIndex:V,newDraggableIndex:Q,...t})}let L,K,W,j,z,G,U,$,q,V,Z,Q,J,tt,et,ot,nt,it,lt,rt,at,st,ct,dt,ut,ht=!1,pt=!1,ft=[],gt=!1,mt=!1,vt=[],bt=!1,wt=[];const Et="undefined"!=typeof document,yt=l,Dt=o||e?"cssFloat":"float",_t=Et&&!r&&!l&&"draggable"in document.createElement("div"),St=function(){if(!Et)return;if(e)return!1;let t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}(),Ct=function(t,e){let o=g(t),n=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),i=y(t,0,e),l=y(t,1,e),r=i&&g(i),a=l&&g(l),s=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+w(i).width,c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+w(l).width;if("flex"===o.display)return"column"===o.flexDirection||"column-reverse"===o.flexDirection?"vertical":"horizontal";if("grid"===o.display)return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&r.float&&"none"!==r.float){let t="left"===r.float?"left":"right";return!l||"both"!==a.clear&&a.clear!==t?"horizontal":"vertical"}return i&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||s>=n&&"none"===o[Dt]||l&&"none"===o[Dt]&&s+c>n)?"vertical":"horizontal"},Tt=function(t){function e(t,o){return function(n,i,l,r){let a=n.options.group.name&&i.options.group.name&&n.options.group.name===i.options.group.name;if(null==t&&(o||a))return!0;if(null==t||!1===t)return!1;if(o&&"clone"===t)return t;if("function"==typeof t)return e(t(n,i,l,r),o)(n,i,l,r);{let e=(o?n:i).options.group.name;return!0===t||"string"==typeof t&&t===e||t.join&&t.indexOf(e)>-1}}}let o={},n=t.group;n&&"object"==typeof n||(n={name:n}),o.name=n.name,o.checkPull=e(n.pull,!0),o.checkPut=e(n.put),o.revertClone=n.revertClone,t.group=o},xt=function(){!St&&W&&g(W,"display","none")},Mt=function(){!St&&W&&g(W,"display","")};Et&&document.addEventListener("click",function(t){if(pt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),pt=!1,!1},!0);let Nt=function(t){if(L){let e=function(t,e){let o;return ft.some(n=>{if(D(n))return;let i=w(n),l=n[P].options.emptyInsertThreshold,r=t>=i.left-l&&t<=i.right+l,a=e>=i.top-l&&e<=i.bottom+l;return l&&r&&a?o=n:void 0}),o}((t=t.touches?t.touches[0]:t).clientX,t.clientY);if(e){let o={};for(let e in t)t.hasOwnProperty(e)&&(o[e]=t[e]);o.target=o.rootEl=e,o.preventDefault=void 0,o.stopPropagation=void 0,e[P]._onDragOver(o)}}},At=function(t){L&&L.parentNode[P]._isOutsideThisEl(t.target)};function Ot(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw`Sortable: \`el\` must be an HTMLElement, not ${{}.toString.call(t)}`;this.el=t,this.options=e=Object.assign({},e),t[P]=this;let o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ct(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Ot.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};Y.initializePlugins(this,t,o);for(let t in o)!(t in e)&&(e[t]=o[t]);Tt(e);for(let t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));this.nativeDraggable=!e.forceFallback&&_t,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?s(t,"pointerdown",this._onTapStart):(s(t,"mousedown",this._onTapStart),s(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(s(t,"dragover",this),s(t,"dragenter",this)),ft.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Object.assign(this,k())}function It(t,n,i,l,r,a,s,c){let d,u,h=t[P],p=h.options.onMove;return!window.CustomEvent||e||o?(d=document.createEvent("Event")).initEvent("move",!0,!0):d=new CustomEvent("move",{bubbles:!0,cancelable:!0}),d.to=n,d.from=t,d.dragged=i,d.draggedRect=l,d.related=r||n,d.relatedRect=a||w(n),d.willInsertAfter=c,d.originalEvent=s,t.dispatchEvent(d),p&&(u=p.call(h,d,s)),u}function Pt(t){t.draggable=!1}function kt(){bt=!1}function Rt(t){let e=t.tagName+t.className+t.src+t.href+t.textContent,o=e.length,n=0;for(;o--;)n+=e.charCodeAt(o);return n.toString(36)}function Xt(t){return setTimeout(t,0)}function Yt(t){return clearTimeout(t)}Ot.prototype={constructor:Ot,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(st=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,L):this.options.direction},_onTapStart:function(t){if(!t.cancelable)return;let e=this,o=this.el,n=this.options,l=n.preventOnFilter,r=t.type,a=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,s=(a||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,d=n.filter;if(function(t){wt.length=0;let e=t.getElementsByTagName("input"),o=e.length;for(;o--;){let t=e[o];t.checked&&wt.push(t)}}(o),!L&&!(/mousedown|pointerdown/.test(r)&&0!==t.button||n.disabled)&&!c.isContentEditable&&(this.nativeDraggable||!i||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=h(s,n.draggable,o,!1))&&s.animated||G===s)){if(q=_(s),Z=_(s,n.draggable),"function"==typeof d){if(d.call(this,t,s,this))return H({sortable:e,rootEl:c,name:"filter",targetEl:s,toEl:o,fromEl:o}),F("filter",e,{evt:t}),void(l&&t.cancelable&&t.preventDefault())}else if(d&&(d=d.split(",").some(function(n){if(n=h(c,n.trim(),o,!1))return H({sortable:e,rootEl:n,name:"filter",targetEl:s,fromEl:o,toEl:o}),F("filter",e,{evt:t}),!0})))return void(l&&t.cancelable&&t.preventDefault());n.handle&&!h(c,n.handle,o,!1)||this._prepareDragStart(t,a,s)}},_prepareDragStart:function(t,i,l){let r,a=this,c=a.el,d=a.options,u=c.ownerDocument;if(l&&!L&&l.parentNode===c){let h=w(l);if(j=c,K=(L=l).parentNode,z=L.nextSibling,G=l,J=d.group,Ot.dragged=L,et={target:L,clientX:(i||t).clientX,clientY:(i||t).clientY},lt=et.clientX-h.left,rt=et.clientY-h.top,this._lastX=(i||t).clientX,this._lastY=(i||t).clientY,L.style["will-change"]="all",r=function(){F("delayEnded",a,{evt:t}),Ot.eventCanceled?a._onDrop():(a._disableDelayedDragEvents(),!n&&a.nativeDraggable&&(L.draggable=!0),a._triggerDragStart(t,i),H({sortable:a,name:"choose",originalEvent:t}),f(L,d.chosenClass,!0))},d.ignore.split(",").forEach(function(t){v(L,t.trim(),Pt)}),s(u,"dragover",Nt),s(u,"mousemove",Nt),s(u,"touchmove",Nt),s(u,"mouseup",a._onDrop),s(u,"touchend",a._onDrop),s(u,"touchcancel",a._onDrop),n&&this.nativeDraggable&&(this.options.touchStartThreshold=4,L.draggable=!0),F("delayStart",this,{evt:t}),!d.delay||d.delayOnTouchOnly&&!i||this.nativeDraggable&&(o||e))r();else{if(Ot.eventCanceled)return void this._onDrop();s(u,"mouseup",a._disableDelayedDrag),s(u,"touchend",a._disableDelayedDrag),s(u,"touchcancel",a._disableDelayedDrag),s(u,"mousemove",a._delayedDragTouchMoveHandler),s(u,"touchmove",a._delayedDragTouchMoveHandler),d.supportPointer&&s(u,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(r,d.delay)}}},_delayedDragTouchMoveHandler:function(t){let e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){L&&Pt(L),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){let t=this.el.ownerDocument;c(t,"mouseup",this._disableDelayedDrag),c(t,"touchend",this._disableDelayedDrag),c(t,"touchcancel",this._disableDelayedDrag),c(t,"mousemove",this._delayedDragTouchMoveHandler),c(t,"touchmove",this._delayedDragTouchMoveHandler),c(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?s(document,"pointermove",this._onTouchMove):s(document,e?"touchmove":"mousemove",this._onTouchMove):(s(L,"dragend",this),s(j,"dragstart",this._onDragStart));try{document.selection?Xt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(ht=!1,j&&L){F("dragStarted",this,{evt:e}),this.nativeDraggable&&s(document,"dragover",At);let o=this.options;!t&&f(L,o.dragClass,!1),f(L,o.ghostClass,!0),Ot.active=this,t&&this._appendGhost(),H({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(ot){this._lastX=ot.clientX,this._lastY=ot.clientY,xt();let t=document.elementFromPoint(ot.clientX,ot.clientY),e=t;for(;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(ot.clientX,ot.clientY))!==e;)e=t;if(L.parentNode[P]._isOutsideThisEl(t),e)do{if(e[P]){let o;if((o=e[P]._onDragOver({clientX:ot.clientX,clientY:ot.clientY,target:t,rootEl:e}))&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);Mt()}},_onTouchMove:function(t){if(et){let e=this.options,o=e.fallbackTolerance,n=e.fallbackOffset,i=t.touches?t.touches[0]:t,l=W&&m(W,!0),r=W&&l&&l.a,a=W&&l&&l.d,s=yt&&ut&&S(ut),c=(i.clientX-et.clientX+n.x)/(r||1)+(s?s[0]-vt[0]:0)/(r||1),d=(i.clientY-et.clientY+n.y)/(a||1)+(s?s[1]-vt[1]:0)/(a||1);if(!Ot.active&&!ht){if(o&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<o)return;this._onDragStart(t,!0)}if(W){l?(l.e+=c-(nt||0),l.f+=d-(it||0)):l={a:1,b:0,c:0,d:1,e:c,f:d};let t=`matrix(${l.a},${l.b},${l.c},${l.d},${l.e},${l.f})`;g(W,"webkitTransform",t),g(W,"mozTransform",t),g(W,"msTransform",t),g(W,"transform",t),nt=c,it=d,ot=i}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!W){let t=this.options.fallbackOnBody?document.body:j,e=w(L,!0,yt,!0,t),o=this.options;if(yt){for(ut=t;"static"===g(ut,"position")&&"none"===g(ut,"transform")&&ut!==document;)ut=ut.parentNode;ut!==document.body&&ut!==document.documentElement?(ut===document&&(ut=b()),e.top+=ut.scrollTop,e.left+=ut.scrollLeft):ut=b(),vt=S(ut)}f(W=L.cloneNode(!0),o.ghostClass,!1),f(W,o.fallbackClass,!0),f(W,o.dragClass,!0),g(W,"transition",""),g(W,"transform",""),g(W,"box-sizing","border-box"),g(W,"margin",0),g(W,"top",e.top),g(W,"left",e.left),g(W,"width",e.width),g(W,"height",e.height),g(W,"opacity","0.8"),g(W,"position",yt?"absolute":"fixed"),g(W,"zIndex","100000"),g(W,"pointerEvents","none"),Ot.ghost=W,t.appendChild(W),g(W,"transform-origin",lt/parseInt(W.style.width)*100+"% "+rt/parseInt(W.style.height)*100+"%")}},_onDragStart:function(t,e){let o=this,n=t.dataTransfer,l=o.options;F("dragStart",this,{evt:t}),Ot.eventCanceled?this._onDrop():(F("setupClone",this),Ot.eventCanceled||((U=A(L)).draggable=!1,U.style["will-change"]="",this._hideClone(),f(U,this.options.chosenClass,!1),Ot.clone=U),o.cloneId=Xt(function(){F("clone",o),Ot.eventCanceled||(o.options.removeCloneOnHide||j.insertBefore(U,L),o._hideClone(),H({sortable:o,name:"clone"}))}),!e&&f(L,l.dragClass,!0),e?(pt=!0,o._loopId=setInterval(o._emulateDragOver,50)):(c(document,"mouseup",o._onDrop),c(document,"touchend",o._onDrop),c(document,"touchcancel",o._onDrop),n&&(n.effectAllowed="move",l.setData&&l.setData.call(o,n,L)),s(document,"drop",o),g(L,"transform","translateZ(0)")),ht=!0,o._dragStartId=Xt(o._dragStarted.bind(o,e,t)),s(document,"selectstart",o),at=!0,i&&g(document.body,"user-select","none"))},_onDragOver:function(t){let e,o,n,i,l=this.el,r=t.target,a=this.options,s=a.group,c=Ot.active,d=J===s,u=a.sort,p=tt||c,m=this,v=!1;if(!bt){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),r=h(r,a.draggable,l,!0),b("dragOver"),Ot.eventCanceled)return v;if(L.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||m._ignoreWhileAnimating===r)return S(!1);if(pt=!1,c&&!a.disabled&&(d?u||(n=!j.contains(L)):tt===this||(this.lastPutMode=J.checkPull(this,c,L,t))&&s.checkPut(this,c,L,t))){if(i="vertical"===this._getDirection(t,r),e=w(L),b("dragOverValid"),Ot.eventCanceled)return v;if(n)return K=j,y(),this._hideClone(),b("revert"),Ot.eventCanceled||(z?j.insertBefore(L,z):j.appendChild(L)),S(!0);let s=D(l,a.draggable);if(!s||function(t,e,o){let n=w(D(o.el,o.options.draggable));return e?t.clientX>n.right+10||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+10}(t,i,this)&&!s.animated){if(s===L)return S(!1);if(s&&l===t.target&&(r=s),r&&(o=w(r)),!1!==It(j,l,L,e,r,o,t,!!r))return y(),l.appendChild(L),K=l,C(),S(!0)}else if(r.parentNode===l){o=w(r);let n,s,c=0,d=L.parentNode!==l,u=!function(t,e,o){let n=o?t.left:t.top,i=o?t.right:t.bottom,l=o?t.width:t.height,r=o?e.left:e.top,a=o?e.right:e.bottom,s=o?e.width:e.height;return n===r||i===a||n+l/2===r+s/2}(L.animated&&L.toRect||e,r.animated&&r.toRect||o,i),h=i?"top":"left",p=E(r,"top","top")||E(L,"top","top"),f=p?p.scrollTop:void 0;if(st!==r&&(n=o[h],gt=!1,mt=!u&&a.invertSwap||d),0!==(c=function(t,e,o,n,i,l,r,a){let s=n?t.clientY:t.clientX,c=n?o.height:o.width,d=n?o.top:o.left,u=n?o.bottom:o.right,h=!1;if(!r)if(a&&dt<c*i){if(!gt&&(1===ct?s>d+c*l/2:s<u-c*l/2)&&(gt=!0),gt)h=!0;else if(1===ct?s<d+dt:s>u-dt)return-ct}else if(s>d+c*(1-i)/2&&s<u-c*(1-i)/2)return function(t){return _(L)<_(t)?1:-1}(e);if((h=h||r)&&(s<d+c*l/2||s>u-c*l/2))return s>d+c/2?1:-1;return 0}(t,r,o,i,u?1:a.swapThreshold,null==a.invertedSwapThreshold?a.swapThreshold:a.invertedSwapThreshold,mt,st===r))){let t=_(L);do{t-=c,s=K.children[t]}while(s&&("none"===g(s,"display")||s===W))}if(0===c||s===r)return S(!1);st=r,ct=c;let m=r.nextElementSibling,v=!1,b=It(j,l,L,e,r,o,t,v=1===c);if(!1!==b)return 1!==b&&-1!==b||(v=1===b),bt=!0,setTimeout(kt,30),y(),v&&!m?l.appendChild(L):r.parentNode.insertBefore(L,v?m:r),p&&N(p,0,f-p.scrollTop),K=L.parentNode,void 0===n||mt||(dt=Math.abs(n-w(r)[h])),C(),S(!0)}if(l.contains(L))return S(!1)}return!1}function b(a,s){F(a,m,{evt:t,isOwner:d,axis:i?"vertical":"horizontal",revert:n,dragRect:e,targetRect:o,canSort:u,fromSortable:p,target:r,completed:S,onMove:(o,n)=>It(j,l,L,e,o,w(o),t,n),changed:C,...s})}function y(){b("dragOverAnimationCapture"),m.captureAnimationState(),m!==p&&p.captureAnimationState()}function S(e){return b("dragOverCompleted",{insertion:e}),e&&(d?c._hideClone():c._showClone(m),m!==p&&(f(L,tt?tt.options.ghostClass:c.options.ghostClass,!1),f(L,a.ghostClass,!0)),tt!==m&&m!==Ot.active?tt=m:m===Ot.active&&tt&&(tt=null),p===m&&(m._ignoreWhileAnimating=r),m.animateAll(function(){b("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(r===L&&!L.animated||r===l&&!r.animated)&&(st=null),a.dragoverBubble||t.rootEl||r===document||(L.parentNode[P]._isOutsideThisEl(t.target),!e&&Nt(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),v=!0}function C(){V=_(L),Q=_(L,a.draggable),H({sortable:m,name:"change",toEl:l,newIndex:V,newDraggableIndex:Q,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){c(document,"mousemove",this._onTouchMove),c(document,"touchmove",this._onTouchMove),c(document,"pointermove",this._onTouchMove),c(document,"dragover",Nt),c(document,"mousemove",Nt),c(document,"touchmove",Nt)},_offUpEvents:function(){let t=this.el.ownerDocument;c(t,"mouseup",this._onDrop),c(t,"touchend",this._onDrop),c(t,"pointerup",this._onDrop),c(t,"touchcancel",this._onDrop),c(document,"selectstart",this)},_onDrop:function(t){let e=this.el,o=this.options;V=_(L),Q=_(L,o.draggable),F("drop",this,{evt:t}),K=L&&L.parentNode,V=_(L),Q=_(L,o.draggable),Ot.eventCanceled?this._nulling():(ht=!1,mt=!1,gt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Yt(this.cloneId),Yt(this._dragStartId),this.nativeDraggable&&(c(document,"drop",this),c(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),i&&g(document.body,"user-select",""),g(L,"transform",""),t&&(at&&(t.cancelable&&t.preventDefault(),!o.dropBubble&&t.stopPropagation()),W&&W.parentNode&&W.parentNode.removeChild(W),(j===K||tt&&"clone"!==tt.lastPutMode)&&U&&U.parentNode&&U.parentNode.removeChild(U),L&&(this.nativeDraggable&&c(L,"dragend",this),Pt(L),L.style["will-change"]="",at&&!ht&&f(L,tt?tt.options.ghostClass:this.options.ghostClass,!1),f(L,this.options.chosenClass,!1),H({sortable:this,name:"unchoose",toEl:K,newIndex:null,newDraggableIndex:null,originalEvent:t}),j!==K?(V>=0&&(H({rootEl:K,name:"add",toEl:K,fromEl:j,originalEvent:t}),H({sortable:this,name:"remove",toEl:K,originalEvent:t}),H({rootEl:K,name:"sort",toEl:K,fromEl:j,originalEvent:t}),H({sortable:this,name:"sort",toEl:K,originalEvent:t})),tt&&tt.save()):V!==q&&V>=0&&(H({sortable:this,name:"update",toEl:K,originalEvent:t}),H({sortable:this,name:"sort",toEl:K,originalEvent:t})),Ot.active&&(null!=V&&-1!==V||(V=q,Q=Z),H({sortable:this,name:"end",toEl:K,originalEvent:t}),this.save()))),this._nulling())},_nulling:function(){F("nulling",this),j=L=K=W=z=U=G=$=et=ot=at=V=Q=q=Z=st=ct=tt=J=Ot.dragged=Ot.ghost=Ot.clone=Ot.active=null,wt.forEach(function(t){t.checked=!0}),wt.length=nt=it=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":L&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){let t,e=[],o=this.el.children,n=0,i=o.length,l=this.options;for(;n<i;n++)h(t=o[n],l.draggable,this.el,!1)&&e.push(t.getAttribute(l.dataIdAttr)||Rt(t));return e},sort:function(t){let e={},o=this.el;this.toArray().forEach(function(t,n){let i=o.children[n];h(i,this.options.draggable,o,!1)&&(e[t]=i)},this),t.forEach(function(t){e[t]&&(o.removeChild(e[t]),o.appendChild(e[t]))})},save:function(){let t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return h(t,e||this.options.draggable,this.el,!1)},option:function(t,e){let o=this.options;if(void 0===e)return o[t];{let n=Y.modifyOption(this,t,e);o[t]=void 0!==n?n:e,"group"===t&&Tt(o)}},destroy:function(){F("destroy",this);let t=this.el;t[P]=null,c(t,"mousedown",this._onTapStart),c(t,"touchstart",this._onTapStart),c(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(c(t,"dragover",this),c(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ft.splice(ft.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!$){if(F("hideClone",this),Ot.eventCanceled)return;g(U,"display","none"),this.options.removeCloneOnHide&&U.parentNode&&U.parentNode.removeChild(U),$=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if($){if(F("showClone",this),Ot.eventCanceled)return;L.parentNode!=j||this.options.group.revertClone?z?j.insertBefore(U,z):j.appendChild(U):j.insertBefore(U,L),this.options.group.revertClone&&this.animate(L,U),g(U,"display",""),$=!1}}else this._hideClone()}},Et&&s(document,"touchmove",function(t){(Ot.active||ht)&&t.cancelable&&t.preventDefault()}),Ot.utils={on:s,off:c,css:g,find:v,is:function(t,e){return!!h(t,e,t,!1)},extend:function(t,e){if(t&&e)for(let o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t},throttle:M,closest:h,toggleClass:f,clone:A,index:_,nextTick:Xt,cancelNextTick:Yt,detectDirection:Ct,getChild:y},Ot.get=function(t){return t[P]},Ot.mount=function(...t){t[0].constructor===Array&&(t=t[0]),t.forEach(t=>{if(!t.prototype||!t.prototype.constructor)throw`Sortable: Mounted plugin must be a constructor function, not ${{}.toString.call(t)}`;t.utils&&(Ot.utils={...Ot.utils,...t.utils}),Y.mount(t)})},Ot.create=function(t,e){return new Ot(t,e)},Ot.version="1.11.0";let Bt,Ft,Ht,Lt,Kt,Wt,jt=[],zt=!1;function Gt(){jt.forEach(function(t){clearInterval(t.pid)}),jt=[]}function Ut(){clearInterval(Wt)}const $t=M(function(t,e,o,n){if(!e.scroll)return;const i=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,r=e.scrollSensitivity,a=e.scrollSpeed,s=b();let c,d=!1;Ft!==o&&(Ft=o,Gt(),Bt=e.scroll,c=e.scrollFn,!0===Bt&&(Bt=C(o,!0)));let u=0,h=Bt;do{let e,o,p=h,f=w(p),m=f.top,v=f.bottom,b=f.left,E=f.right,y=f.width,D=f.height,_=p.scrollWidth,S=p.scrollHeight,C=g(p),T=p.scrollLeft,x=p.scrollTop;p===s?(e=y<_&&("auto"===C.overflowX||"scroll"===C.overflowX||"visible"===C.overflowX),o=D<S&&("auto"===C.overflowY||"scroll"===C.overflowY||"visible"===C.overflowY)):(e=y<_&&("auto"===C.overflowX||"scroll"===C.overflowX),o=D<S&&("auto"===C.overflowY||"scroll"===C.overflowY));let M=e&&(Math.abs(E-i)<=r&&T+y<_)-(Math.abs(b-i)<=r&&!!T),A=o&&(Math.abs(v-l)<=r&&x+D<S)-(Math.abs(m-l)<=r&&!!x);if(!jt[u])for(let t=0;t<=u;t++)jt[t]||(jt[t]={});jt[u].vx==M&&jt[u].vy==A&&jt[u].el===p||(jt[u].el=p,jt[u].vx=M,jt[u].vy=A,clearInterval(jt[u].pid),0==M&&0==A||(d=!0,jt[u].pid=setInterval(function(){n&&0===this.layer&&Ot.active._onTouchMove(Kt);let e=jt[this.layer].vy?jt[this.layer].vy*a:0,o=jt[this.layer].vx?jt[this.layer].vx*a:0;"function"==typeof c&&"continue"!==c.call(Ot.dragged.parentNode[P],o,e,t,Kt,jt[this.layer].el)||N(jt[this.layer].el,o,e)}.bind({layer:u}),24))),u++}while(e.bubbleScroll&&h!==s&&(h=C(h,!1)));zt=d},30),qt=function({originalEvent:t,putSortable:e,dragEl:o,activeSortable:n,dispatchSortableEvent:i,hideGhostForTarget:l,unhideGhostForTarget:r}){if(!t)return;let a=e||n;l();let s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,c=document.elementFromPoint(s.clientX,s.clientY);r(),a&&!a.el.contains(c)&&(i("spill"),this.onSpill({dragEl:o,putSortable:e}))};function Vt(){}function Zt(){}let Qt;Vt.prototype={startIndex:null,dragStart({oldDraggableIndex:t}){this.startIndex=t},onSpill({dragEl:t,putSortable:e}){this.sortable.captureAnimationState(),e&&e.captureAnimationState();let o=y(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),e&&e.animateAll()},drop:qt},Object.assign(Vt,{pluginName:"revertOnSpill"}),Zt.prototype={onSpill({dragEl:t,putSortable:e}){const o=e||this.sortable;o.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),o.animateAll()},drop:qt},Object.assign(Zt,{pluginName:"removeOnSpill"});let Jt,te,ee,oe,ne,ie=[],le=[],re=!1,ae=!1,se=!1;function ce(t,e){le.forEach((o,n)=>{let i=e.children[o.sortableIndex+(t?Number(n):0)];i?e.insertBefore(o,i):e.appendChild(o)})}function de(){ie.forEach(t=>{t!==ee&&t.parentNode&&t.parentNode.removeChild(t)})}return Ot.mount(new function(){function t(){this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(let t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted({originalEvent:t}){this.sortable.nativeDraggable?s(document,"dragover",this._handleAutoScroll):this.options.supportPointer?s(document,"pointermove",this._handleFallbackAutoScroll):t.touches?s(document,"touchmove",this._handleFallbackAutoScroll):s(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted({originalEvent:t}){this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop(){this.sortable.nativeDraggable?c(document,"dragover",this._handleAutoScroll):(c(document,"pointermove",this._handleFallbackAutoScroll),c(document,"touchmove",this._handleFallbackAutoScroll),c(document,"mousemove",this._handleFallbackAutoScroll)),Ut(),Gt(),clearTimeout(x),x=void 0},nulling(){Kt=Ft=Bt=zt=Wt=Ht=Lt=null,jt.length=0},_handleFallbackAutoScroll(t){this._handleAutoScroll(t,!0)},_handleAutoScroll(t,n){const l=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(l,r);if(Kt=t,n||o||e||i){$t(t,this.options,a,n);let e=C(a,!0);!zt||Wt&&l===Ht&&r===Lt||(Wt&&Ut(),Wt=setInterval(()=>{let o=C(document.elementFromPoint(l,r),!0);o!==e&&(e=o,Gt()),$t(t,this.options,o,n)},10),Ht=l,Lt=r)}else{if(!this.options.bubbleScroll||C(a,!0)===b())return void Gt();$t(t,this.options,C(a,!1),!1)}}},Object.assign(t,{pluginName:"scroll",initializeByDefault:!0})}),Ot.mount(Zt,Vt),Ot.mount(new function(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart({dragEl:t}){Qt=t},dragOverValid({completed:t,target:e,onMove:o,activeSortable:n,changed:i,cancel:l}){if(!n.options.swap)return;let r=this.sortable.el,a=this.options;if(e&&e!==r){let t=Qt;!1!==o(e)?(f(e,a.swapClass,!0),Qt=e):Qt=null,t&&t!==Qt&&f(t,a.swapClass,!1)}i(),t(!0),l()},drop({activeSortable:t,putSortable:e,dragEl:o}){let n=e||this.sortable,i=this.options;Qt&&f(Qt,i.swapClass,!1),Qt&&(i.swap||e&&e.options.swap)&&o!==Qt&&(n.captureAnimationState(),n!==t&&t.captureAnimationState(),function(t,e){let o,n,i=t.parentNode,l=e.parentNode;i&&l&&!i.isEqualNode(e)&&!l.isEqualNode(t)&&(o=_(t),n=_(e),i.isEqualNode(l)&&o<n&&n++,i.insertBefore(e,i.children[o]),l.insertBefore(t,l.children[n]))}(o,Qt),n.animateAll(),n!==t&&t.animateAll())},nulling(){Qt=null}},Object.assign(t,{pluginName:"swap",eventProperties:()=>({swapItem:Qt})})}),Ot.mount(new function(){function t(t){for(let t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));t.options.supportPointer?s(document,"pointerup",this._deselectMultiDrag):(s(document,"mouseup",this._deselectMultiDrag),s(document,"touchend",this._deselectMultiDrag)),s(document,"keydown",this._checkKeyDown),s(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData(e,o){let n="";ie.length&&te===t?ie.forEach((t,e)=>{n+=(e?", ":"")+t.textContent}):n=o.textContent,e.setData("Text",n)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal({dragEl:t}){ee=t},delayEnded(){this.isMultiDrag=~ie.indexOf(ee)},setupClone({sortable:t,cancel:e}){if(this.isMultiDrag){for(let t=0;t<ie.length;t++)le.push(A(ie[t])),le[t].sortableIndex=ie[t].sortableIndex,le[t].draggable=!1,le[t].style["will-change"]="",f(le[t],this.options.selectedClass,!1),ie[t]===ee&&f(le[t],this.options.chosenClass,!1);t._hideClone(),e()}},clone({sortable:t,rootEl:e,dispatchSortableEvent:o,cancel:n}){this.isMultiDrag&&(this.options.removeCloneOnHide||ie.length&&te===t&&(ce(!0,e),o("clone"),n()))},showClone({cloneNowShown:t,rootEl:e,cancel:o}){this.isMultiDrag&&(ce(!1,e),le.forEach(t=>{g(t,"display","")}),t(),ne=!1,o())},hideClone({sortable:t,cloneNowHidden:e,cancel:o}){this.isMultiDrag&&(le.forEach(t=>{g(t,"display","none"),this.options.removeCloneOnHide&&t.parentNode&&t.parentNode.removeChild(t)}),e(),ne=!0,o())},dragStartGlobal({sortable:t}){!this.isMultiDrag&&te&&te.multiDrag._deselectMultiDrag(),ie.forEach(t=>{t.sortableIndex=_(t)}),ie=ie.sort(function(t,e){return t.sortableIndex-e.sortableIndex}),se=!0},dragStarted({sortable:t}){if(this.isMultiDrag){if(this.options.sort&&(t.captureAnimationState(),this.options.animation)){ie.forEach(t=>{t!==ee&&g(t,"position","absolute")});let t=w(ee,!1,!0,!0);ie.forEach(e=>{e!==ee&&O(e,t)}),ae=!0,re=!0}t.animateAll(()=>{ae=!1,re=!1,this.options.animation&&ie.forEach(t=>{I(t)}),this.options.sort&&de()})}},dragOver({target:t,completed:e,cancel:o}){ae&&~ie.indexOf(t)&&(e(!1),o())},revert({fromSortable:t,rootEl:e,sortable:o,dragRect:n}){ie.length>1&&(ie.forEach(e=>{o.addAnimationState({target:e,rect:ae?w(e):n}),I(e),e.fromRect=n,t.removeAnimationState(e)}),ae=!1,function(t,e){ie.forEach((o,n)=>{let i=e.children[o.sortableIndex+(t?Number(n):0)];i?e.insertBefore(o,i):e.appendChild(o)})}(!this.options.removeCloneOnHide,e))},dragOverCompleted({sortable:t,isOwner:e,insertion:o,activeSortable:n,parentEl:i,putSortable:l}){let r=this.options;if(o){if(e&&n._hideClone(),re=!1,r.animation&&ie.length>1&&(ae||!e&&!n.options.sort&&!l)){let t=w(ee,!1,!0,!0);ie.forEach(e=>{e!==ee&&(O(e,t),i.appendChild(e))}),ae=!0}if(!e)if(ae||de(),ie.length>1){let e=ne;n._showClone(t),n.options.animation&&!ne&&e&&le.forEach(t=>{n.addAnimationState({target:t,rect:oe}),t.fromRect=oe,t.thisAnimationDuration=null})}else n._showClone(t)}},dragOverAnimationCapture({dragRect:t,isOwner:e,activeSortable:o}){if(ie.forEach(t=>{t.thisAnimationDuration=null}),o.options.animation&&!e&&o.multiDrag.isMultiDrag){oe=Object.assign({},t);let e=m(ee,!0);oe.top-=e.f,oe.left-=e.e}},dragOverAnimationComplete(){ae&&(ae=!1,de())},drop({originalEvent:t,rootEl:e,parentEl:o,sortable:n,dispatchSortableEvent:i,oldIndex:l,putSortable:r}){let a=r||this.sortable;if(!t)return;let s=this.options,c=o.children;if(!se)if(s.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),f(ee,s.selectedClass,!~ie.indexOf(ee)),~ie.indexOf(ee))ie.splice(ie.indexOf(ee),1),Jt=null,B({sortable:n,rootEl:e,name:"deselect",targetEl:ee,originalEvt:t});else{if(ie.push(ee),B({sortable:n,rootEl:e,name:"select",targetEl:ee,originalEvt:t}),t.shiftKey&&Jt&&n.el.contains(Jt)){let o=_(Jt),i=_(ee);if(~o&&~i&&o!==i){let l,r;for(i>o?(r=o,l=i):(r=i,l=o+1);r<l;r++)~ie.indexOf(c[r])||(f(c[r],s.selectedClass,!0),ie.push(c[r]),B({sortable:n,rootEl:e,name:"select",targetEl:c[r],originalEvt:t}))}}else Jt=ee;te=a}if(se&&this.isMultiDrag){if((o[P].options.sort||o!==e)&&ie.length>1){let t=w(ee),e=_(ee,":not(."+this.options.selectedClass+")");if(!re&&s.animation&&(ee.thisAnimationDuration=null),a.captureAnimationState(),!re&&(s.animation&&(ee.fromRect=t,ie.forEach(e=>{if(e.thisAnimationDuration=null,e!==ee){let o=ae?w(e):t;e.fromRect=o,a.addAnimationState({target:e,rect:o})}})),de(),ie.forEach(t=>{c[e]?o.insertBefore(t,c[e]):o.appendChild(t),e++}),l===_(ee))){let t=!1;ie.forEach(e=>{e.sortableIndex===_(e)||(t=!0)}),t&&i("update")}ie.forEach(t=>{I(t)}),a.animateAll()}te=a}(e===o||r&&"clone"!==r.lastPutMode)&&le.forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)})},nullingGlobal(){this.isMultiDrag=se=!1,le.length=0},destroyGlobal(){this._deselectMultiDrag(),c(document,"pointerup",this._deselectMultiDrag),c(document,"mouseup",this._deselectMultiDrag),c(document,"touchend",this._deselectMultiDrag),c(document,"keydown",this._checkKeyDown),c(document,"keyup",this._checkKeyUp)},_deselectMultiDrag(t){if(!(void 0!==se&&se||te!==this.sortable||t&&h(t.target,this.options.draggable,this.sortable.el,!1)||t&&0!==t.button))for(;ie.length;){let e=ie[0];f(e,this.options.selectedClass,!1),ie.shift(),B({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:e,originalEvt:t})}},_checkKeyDown(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Object.assign(t,{pluginName:"multiDrag",utils:{select(t){let e=t.parentNode[P];e&&e.options.multiDrag&&!~ie.indexOf(t)&&(te&&te!==e&&(te.multiDrag._deselectMultiDrag(),te=e),f(t,e.options.selectedClass,!0),ie.push(t))},deselect(t){let e=t.parentNode[P],o=ie.indexOf(t);e&&e.options.multiDrag&&~o&&(f(t,e.options.selectedClass,!1),ie.splice(o,1))}},eventProperties(){const t=[],e=[];return ie.forEach(o=>{let n;t.push({multiDragElement:o,index:o.sortableIndex}),n=ae&&o!==ee?-1:ae?_(o,":not(."+this.options.selectedClass+")"):_(o),e.push({multiDragElement:o,index:n})}),{items:[...ie],clones:[...le],oldIndicies:t,newIndicies:e}},optionListeners:{multiDragKey:t=>("ctrl"===(t=t.toLowerCase())?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t)}})}),Ot});